namespace SpriteKind {
    export const Weapon = SpriteKind.create()
    export const Acid = SpriteKind.create()
    export const Orb = SpriteKind.create()
    export const Hitbox = SpriteKind.create()
}
controller.up.onEvent(ControllerButtonEvent.Released, function () {
    if (controller.down.isPressed()) {
        LastButtonInput = 1
    } else if (controller.right.isPressed()) {
        LastButtonInput = 3
    } else if (controller.left.isPressed()) {
        LastButtonInput = 2
    }
})
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (Special_Cheat == 0) {
        if (PauseGame == 1) {
            myMenu.close()
            StopPause = 1
        } else {
            timer.throttle("action", 4000, function () {
                tiles.placeOnTile(sprites.create(assets.image`Acid`, SpriteKind.Acid), mySprite.tilemapLocation())
            })
        }
    }
})
function AttemptAttack () {
    if (LastButtonInput == 4) {
        animation.runImageAnimation(
        BasicKnife,
        [img`
            .......................fff......
            ......................fbbf......
            ......................fbbf......
            .....................fcbbf......
            .....................fcbbf......
            .....................fcbbf......
            .....................fcbbf......
            .....................fcbbf......
            .....................fcbbf......
            .....................fffff......
            ........................ec......
            ........................ec......
            ........................ec......
            ........................ec......
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            .....................fff........
            ....................fbbf........
            ...................fbbf.........
            ...................fbbf.........
            ...................fbbf.........
            ...................fbbf.........
            ...................fbbf.........
            ...................fcbbf........
            ...................fcbbf........
            ...................fffff........
            ......................ec........
            ......................ec........
            .......................ec.......
            .......................ec.......
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ..................fffff.........
            ..................fbbf..........
            .................fbbf...........
            ................fcbbfc..........
            ................fcbbbf..........
            .................cbbf...........
            ................ffcbbf..........
            .................fcbbf..........
            .................fcbbcf.........
            .................fffff..........
            ....................ec..........
            .....................e..........
            .....................ec.........
            .....................ec.........
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ............fbf.................
            ..........fbbbc.................
            ..........fcbbb.................
            .........ccbbf..................
            ..........fcbbf.................
            .........fcbbbc.................
            ...........cbbbf................
            ............cbbbc...............
            ..........cbbeef................
            ............bceef...............
            ............fee.ef..............
            ..............eeeec.............
            ...............eec..............
            ................c...............
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ...f...c...c....................
            fcfb..fbfffec...................
            bbbbfcbbeeeeec..................
            fbbcbbbbee.ee...................
            .bbcbbbcbcee....................
            .fc.cbc.bbe.....................
            ..f.fc..c.f.....................
            .....f..........................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ....c.c.........................
            ...fb...........................
            ..fbbf..........................
            ..fcb..c........................
            ..ccbb..cc......................
            ...fcbc.........................
            ..fbcb.c.c......................
            ...fcbb.........................
            ....fbbb.c......................
            .....ccbb.c.....................
            .....ffbce......................
            .....f.feee.....................
            ........fffceeec................
            ..........f.eeec................
            ..........ffff..................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            .f.ff...........................
            fbfbbff.f...c...................
            .bbbbbbfcf.c..c.................
            .fbcbbbbbfc..ccc................
            ..ffcccbbfecccee................
            ....f.fccf.eee..................
            ......ffff......................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ............cc..................
            .......fffccee..................
            fffffffbbfee....................
            fbbbbbbbbf......................
            fbbbbbbccf......................
            .ffccccfff......................
            ...ffff.........................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ffffffffffcccc..................
            fbbbbbbbbfeeee..................
            fbbbbbbbbf......................
            .ffccccccf......................
            ...fffffff......................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `],
        40,
        false
        )
    } else if (LastButtonInput == 5) {
        animation.runImageAnimation(
        BasicKnife,
        [img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ......................fffffff...
            ......................fccccccff.
            ......................fbbbbbbbbf
            ..................eeeefbbbbbbbbf
            ..................ccccffffffffff
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ......................ffffffff..
            ......................fccbbbbbf.
            ......................fbbbbbbbbf
            ....................eefbbfffffbf
            ..................eeccfff.....ff
            ..................cc............
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            .........................f.ff...
            ......................ffffcccf..
            ......................fcccbbbbff
            ......................fbbbbbbbbf
            .....................efbbbfbffbf
            ..................eeecfcff.fc.ff
            ..................cc...f.......f
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ..........................f.c...
            .......................c..cfcff.
            .......................b.cbcbcb.
            .....................fbbcbbbbbbf
            .....................ecebbbbfbbb
            ....................eeeebbcf.bcf
            ...................ee.efbf......
            ..................ceeef.c.......
            ...................cef..........
            ....................c...........
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ..................fbf...........
            ................fbbbc...........
            ...............fcbbbf...........
            .................ccbbf..........
            ...............fcbbf............
            ..............fcbbbc............
            ................cbbbf...........
            .................cbbbc..........
            ...............cbbeef...........
            ................bceef...........
            ...............fee.ef...........
            .................eeeec..........
            ..................eec...........
            ...................c............
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            .........................f.cff..
            ........................fbfccbf.
            .......................fcccbbbbc
            ....................ffcbbbbb.f..
            .....................fcbb.c....c
            ....................fbbb.c..c...
            ...................fecb....c....
            ...................fee.c.c.c....
            .................fffe.c.........
            .................f.c............
            .................fee............
            .................fee............
            ..................ee............
            ..................cc............
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ......................f.........
            ....................fbbf........
            ...................fbbf.........
            ...................fcbbf........
            ..................fcbbbf........
            ...................cbbf.........
            .................ffcbbf.........
            .................fcbbf..........
            .................fcbbcf.........
            .................fffff..........
            ...................ec...........
            ..................ec.c..........
            ..................ec..c.........
            ..................ecc...........
            ...................ecc..........
            ...................ec...........
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ....fff.........................
            ...fbbf.........................
            ...fbbf.........................
            ..fcbbf.........................
            ..fcbbf.........................
            ..fcbbf.........................
            ..fcbbf.........................
            ...fcbbf........................
            ...fcbbf........................
            ...fffff........................
            ......ec........................
            ......ec........................
            .......ec.......................
            .......ec.......................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ......fff.......................
            .....fbbf.......................
            .....fbbf.......................
            ....fcbbf.......................
            ....fcbbf.......................
            ....fcbbf.......................
            ....fcbbf.......................
            ....fcbbf.......................
            ....fcbbf.......................
            ....fffff.......................
            .......ec.......................
            .......ec.......................
            .......ec.......................
            .......ec.......................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `],
        40,
        false
        )
    } else if (LastButtonInput == 6) {
        animation.runImageAnimation(
        BasicKnife,
        [img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ffffffffffcccc..................
            fbbbbbbbbfeeee..................
            fbbbbbbbbf......................
            .ffccccccf......................
            ...fffffff......................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ............cc..................
            ff.....fffccee..................
            fbfffffbbfee....................
            fbbbbbbbbf......................
            .fbbbbbccf......................
            ..ffffffff......................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            f.......f...cc..................
            ff.cf.ffcfceee..................
            fbffbfbbbfe.....................
            fbbbbbbbbf......................
            ffbbbbcccf......................
            ..fcccffff......................
            ...ff.f.........................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ...........c....................
            ..........fec...................
            .......c.feeec..................
            ......fbfe.ee...................
            fcb.fcbbeeee....................
            bbbfbbbbece.....................
            fbbbbbbcbbf.....................
            .bcbcbc.b.......................
            .ffcfc..c.......................
            ...c.f..........................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ............c...................
            ...........cee..................
            ..........ceeee.................
            ...........fe.eef...............
            ...........feecb................
            ...........feebbc...............
            ..........cbbbc.................
            ...........fbbbc................
            ............cbbbcf..............
            ............fbbcf...............
            ..........fbbcc.................
            ...........fbbbcf...............
            ...........cbbbf................
            ...........fbf..................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ............cc..................
            ............ee..................
            ............eef.................
            ............eef.................
            ............c.f.................
            .........c.efff.................
            ....c.c.c.eef...................
            ....c....bcef...................
            ...c..c.bbbf....................
            c....c.bbcf.....................
            ..f.bbbbbcff....................
            cbbbbcccf.......................
            .fbccfbf........................
            ..ffc.f.........................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ...........ce...................
            ..........cce...................
            ...........cce..................
            .........c..ce..................
            ..........c.ce..................
            ...........ce...................
            ..........fffff.................
            .........fcbbcf.................
            ..........fbbcf.................
            .........fbbcff.................
            .........fbbc...................
            ........fbbbcf..................
            ........fbbcf...................
            .........fbbf...................
            ........fbbf....................
            .........f......................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            .......................ce.......
            .......................ce.......
            ........................ce......
            ........................ce......
            ........................fffff...
            ........................fbbcf...
            ........................fbbcf...
            .........................fbbcf..
            .........................fbbcf..
            .........................fbbcf..
            .........................fbbcf..
            .........................fbbf...
            .........................fbbf...
            .........................fff....
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            .......................ce.......
            .......................ce.......
            .......................ce.......
            .......................ce.......
            .......................fffff....
            .......................fbbcf....
            .......................fbbcf....
            .......................fbbcf....
            .......................fbbcf....
            .......................fbbcf....
            .......................fbbcf....
            .......................fbbf.....
            .......................fbbf.....
            .......................fff......
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `],
        40,
        false
        )
    } else if (LastButtonInput == 7) {
        animation.runImageAnimation(
        BasicKnife,
        [img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ......ce........................
            ......ce........................
            ......ce........................
            ......ce........................
            ......fffff.....................
            ......fbbcf.....................
            ......fbbcf.....................
            ......fbbcf.....................
            ......fbbcf.....................
            ......fbbcf.....................
            ......fbbcf.....................
            ......fbbf......................
            ......fbbf......................
            ......fff.......................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            .......ce.......................
            .......ce.......................
            ........ce......................
            ........ce......................
            ........fffff...................
            ........fbbcf...................
            ........fbbcf...................
            .........fbbf...................
            .........fbbf...................
            .........fbbf...................
            .........fbbf...................
            .........fbbf...................
            ........fbbf....................
            ........fff.....................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            .........ce.....................
            .........ce.....................
            ..........e.....................
            ..........ce....................
            ..........fffff.................
            .........fcbbcf.................
            ..........fbbcf.................
            ..........fbbcff................
            ...........fbbc.................
            ..........fbbbcf................
            ..........cfbbcf................
            ...........fbbf.................
            ..........fbbf..................
            .........fffff..................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ...............c................
            ..............cee...............
            .............ceeee..............
            ..............fe.eef............
            ...............feecb............
            ................feebbc..........
            ...............cbbbc............
            ................fbbbc...........
            .................cbbbcf.........
            .................fbbcf..........
            ..................fbbcc.........
            .................bbbcf..........
            .................cbbbf..........
            .................fbf............
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ..........................f.....
            .....................f.c..cf.f..
            .....................ebb.cbc.cf.
            ....................eecbcbbbcbb.
            ...................ee.eebbbbcbbf
            ..................ceeeeebbcfbbbb
            ...................cefffbf..bfcf
            ....................c...c...f...
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ..................ffff..........
            ................ceee.f..........
            ................ceeecfff........
            .....................eeef.f.....
            ......................ecbff.....
            .....................c.bbcc.....
            ......................c.bbbf....
            .........................bbcf...
            ......................c.c.bcbf..
            .........................cbcf...
            ......................cc..bbcc..
            ........................c..bcf..
            ..........................fbbf..
            ...........................bf...
            .........................c.c....
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ......................ffff......
            ..................eee.fccf.f....
            ................eecccefbbcccff..
            ................ccc..cfbbbbbcbf.
            .................c..c.fcfbbbbbb.
            ...................c...f.ffbbfbf
            ...........................ff.f.
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            .........................ffff...
            ......................fffccccff.
            ......................fccbbbbbbf
            ......................fbbbbbbbbf
            ....................eefbbfffffff
            ..................eeccfff.......
            ..................cc............
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ......................fffffff...
            ......................fccccccff.
            ......................fbbbbbbbbf
            ..................eeeefbbbbbbbbf
            ..................ccccffffffffff
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `,img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `],
        40,
        false
        )
    } else {
        if (characterAnimations.matchesRule(mySprite, characterAnimations.rule(Predicate.FacingDown))) {
            animation.runImageAnimation(
            BasicKnife,
            [img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ce..............................
                ce..............................
                ce..............................
                ce..............................
                ce..............................
                ce..............................
                fffff...........................
                fbbcf...........................
                fbbcf...........................
                fbbcf...........................
                fbbcf...........................
                fbbcf...........................
                fbbf............................
                fbbf............................
                fff.............................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ....ce..........................
                ....ce..........................
                ....ce..........................
                ....ce..........................
                ....ce..........................
                ....ce..........................
                ....fffff.......................
                ....fbbcf.......................
                ....fbbcf.......................
                ....fbbcf.......................
                ....fbbcf.......................
                ....fbbcf.......................
                ....fbbf........................
                ....fbbf........................
                ....fff.........................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                .........ce.....................
                .........ce.....................
                .........ce.....................
                .........ce.....................
                .........ce.....................
                .........ce.....................
                .........fffff..................
                .........fbbcf..................
                .........fbbcf..................
                .........fbbcf..................
                .........fbbcf..................
                .........fbbcf..................
                .........fbbf...................
                .........fbbf...................
                .........fff....................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ..................ce............
                ..................ce............
                ..................ce............
                ..................ce............
                ..................ce............
                ..................ce............
                ..................fffff.........
                ..................fbbcf.........
                ..................fbbcf.........
                ..................fbbcf.........
                ..................fbbcf.........
                ..................fbbcf.........
                ..................fbbf..........
                ..................fbbf..........
                ..................fff...........
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                .......................ce.......
                .......................ce.......
                .......................ce.......
                .......................ce.......
                .......................ce.......
                .......................ce.......
                .......................fffff....
                .......................fbbcf....
                .......................fbbcf....
                .......................fbbcf....
                .......................fbbcf....
                .......................fbbcf....
                .......................fbbf.....
                .......................fbbf.....
                .......................fff......
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ..........................ce....
                ..........................ce....
                ..........................ce....
                ..........................ce....
                ..........................ce....
                ..........................ce....
                ..........................fffff.
                ..........................fbbcf.
                ..........................fbbcf.
                ..........................fbbcf.
                ..........................fbbcf.
                ..........................fbbcf.
                ..........................fbbf..
                ..........................fbbf..
                ..........................fff...
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ...........................ce...
                ...........................ce...
                ...........................ce...
                ...........................ce...
                ...........................ce...
                ...........................ce...
                ...........................fffff
                ...........................fbbcf
                ...........................fbbcf
                ...........................fbbcf
                ...........................fbbcf
                ...........................fbbcf
                ...........................fbbf.
                ...........................fbbf.
                ...........................fff..
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `],
            30,
            false
            )
        } else if (characterAnimations.matchesRule(mySprite, characterAnimations.rule(Predicate.FacingRight))) {
            animation.runImageAnimation(
            BasicKnife,
            [img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                .......................ffffff...
                .......................fcccccff.
                .......................fbbbbbbbf
                .................eeeeeefbbbbbbbf
                .................ccccccfffffffff
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                .......................ffffff...
                .......................fcccccff.
                .......................fbbbbbbbf
                .................eeeeeefbbbbbbbf
                .................ccccccfffffffff
                ................................
                ................................
                ................................
                ................................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                .......................ffffff...
                .......................fcccccff.
                .......................fbbbbbbbf
                .................eeeeeefbbbbbbbf
                .................ccccccfffffffff
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                .......................ffffff...
                .......................fcccccff.
                .......................fbbbbbbbf
                .................eeeeeefbbbbbbbf
                .................ccccccfffffffff
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ................................
                ................................
                ................................
                ................................
                .......................ffffff...
                .......................fcccccff.
                .......................fbbbbbbbf
                .................eeeeeefbbbbbbbf
                .................ccccccfffffffff
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ................................
                .......................ffffff...
                .......................fcccccff.
                .......................fbbbbbbbf
                .................eeeeeefbbbbbbbf
                .................ccccccfffffffff
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                .......................ffffff...
                .......................fcccccff.
                .......................fbbbbbbbf
                .................eeeeeefbbbbbbbf
                .................ccccccfffffffff
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `],
            30,
            false
            )
        } else if (characterAnimations.matchesRule(mySprite, characterAnimations.rule(Predicate.FacingLeft))) {
            animation.runImageAnimation(
            BasicKnife,
            [img`
                fffffffffcccccc.................
                fbbbbbbbfeeeeee.................
                fbbbbbbbf.......................
                .ffcccccf.......................
                ...ffffff.......................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ................................
                ................................
                ................................
                ................................
                fffffffffcccccc.................
                fbbbbbbbfeeeeee.................
                fbbbbbbbf.......................
                .ffcccccf.......................
                ...ffffff.......................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                fffffffffcccccc.................
                fbbbbbbbfeeeeee.................
                fbbbbbbbf.......................
                .ffcccccf.......................
                ...ffffff.......................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                fffffffffcccccc.................
                fbbbbbbbfeeeeee.................
                fbbbbbbbf.......................
                .ffcccccf.......................
                ...ffffff.......................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                fffffffffcccccc.................
                fbbbbbbbfeeeeee.................
                fbbbbbbbf.......................
                .ffcccccf.......................
                ...ffffff.......................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                fffffffffcccccc.................
                fbbbbbbbfeeeeee.................
                fbbbbbbbf.......................
                .ffcccccf.......................
                ...ffffff.......................
                ................................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                fffffffffcccccc.................
                fbbbbbbbfeeeeee.................
                fbbbbbbbf.......................
                .ffcccccf.......................
                ...ffffff.......................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `],
            30,
            false
            )
        } else if (characterAnimations.matchesRule(mySprite, characterAnimations.rule(Predicate.FacingUp))) {
            animation.runImageAnimation(
            BasicKnife,
            [img`
                .............................fff
                ............................fbbf
                ............................fbbf
                ...........................fcbbf
                ...........................fcbbf
                ...........................fcbbf
                ...........................fcbbf
                ...........................fcbbf
                ...........................fffff
                ..............................ec
                ..............................ec
                ..............................ec
                ..............................ec
                ..............................ec
                ..............................ec
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                .........................fff....
                ........................fbbf....
                ........................fbbf....
                .......................fcbbf....
                .......................fcbbf....
                .......................fcbbf....
                .......................fcbbf....
                .......................fcbbf....
                .......................fffff....
                ..........................ec....
                ..........................ec....
                ..........................ec....
                ..........................ec....
                ..........................ec....
                ..........................ec....
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ....................fff.........
                ...................fbbf.........
                ...................fbbf.........
                ..................fcbbf.........
                ..................fcbbf.........
                ..................fcbbf.........
                ..................fcbbf.........
                ..................fcbbf.........
                ..................fffff.........
                .....................ec.........
                .....................ec.........
                .....................ec.........
                .....................ec.........
                .....................ec.........
                .....................ec.........
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ...........fff..................
                ..........fbbf..................
                ..........fbbf..................
                .........fcbbf..................
                .........fcbbf..................
                .........fcbbf..................
                .........fcbbf..................
                .........fcbbf..................
                .........fffff..................
                ............ec..................
                ............ec..................
                ............ec..................
                ............ec..................
                ............ec..................
                ............ec..................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ......fff.......................
                .....fbbf.......................
                .....fbbf.......................
                ....fcbbf.......................
                ....fcbbf.......................
                ....fcbbf.......................
                ....fcbbf.......................
                ....fcbbf.......................
                ....fffff.......................
                .......ec.......................
                .......ec.......................
                .......ec.......................
                .......ec.......................
                .......ec.......................
                .......ec.......................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ...fff..........................
                ..fbbf..........................
                ..fbbf..........................
                .fcbbf..........................
                .fcbbf..........................
                .fcbbf..........................
                .fcbbf..........................
                .fcbbf..........................
                .fffff..........................
                ....ec..........................
                ....ec..........................
                ....ec..........................
                ....ec..........................
                ....ec..........................
                ....ec..........................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ..fff...........................
                .fbbf...........................
                .fbbf...........................
                fcbbf...........................
                fcbbf...........................
                fcbbf...........................
                fcbbf...........................
                fcbbf...........................
                fffff...........................
                ...ec...........................
                ...ec...........................
                ...ec...........................
                ...ec...........................
                ...ec...........................
                ...ec...........................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `,img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                `],
            30,
            false
            )
        }
    }
}
controller.left.onEvent(ControllerButtonEvent.Released, function () {
    if (controller.up.isPressed()) {
        LastButtonInput = 0
    } else if (controller.down.isPressed()) {
        LastButtonInput = 1
    }
})
controller.combos.attachCombo("Uuddlrlrab", function () {
    Special_Cheat = 1
    PauseGame = 1
    myMenu2 = miniMenu.createMenu(
    miniMenu.createMenuItem("1"),
    miniMenu.createMenuItem("2"),
    miniMenu.createMenuItem("3"),
    miniMenu.createMenuItem("4"),
    miniMenu.createMenuItem("5")
    )
    myMenu2.setPosition(scene.cameraProperty(CameraProperty.X), scene.cameraProperty(CameraProperty.Y))
    myMenu2.onButtonPressed(controller.A, function (selection, selectedIndex) {
        LevelCounter = selectedIndex
        myMenu2.close()
        SetScene()
        StopPause = 1
        Special_Cheat = 0
        info.setLife(3)
    })
})
controller.menu.onEvent(ControllerButtonEvent.Pressed, function () {
    Menu()
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    AttemptAttack()
    AttemptInteraction()
})
sprites.onOverlap(SpriteKind.Weapon, SpriteKind.Enemy, function (sprite, otherSprite) {
    if (mySprite.vx == 0 && mySprite.vy == 0) {
        if (characterAnimations.matchesRule(mySprite, characterAnimations.rule(Predicate.FacingRight))) {
            otherSprite.vx = 150
        } else if (characterAnimations.matchesRule(mySprite, characterAnimations.rule(Predicate.FacingLeft))) {
            otherSprite.vx = -150
        } else if (characterAnimations.matchesRule(mySprite, characterAnimations.rule(Predicate.FacingUp))) {
            otherSprite.vy = -150
        } else {
            otherSprite.vy = 150
        }
    } else {
        otherSprite.setVelocity(sprite.vx * 2, sprite.vy * 2)
    }
    if (sprites.readDataNumber(otherSprite, "Immunity") != 1) {
        sprites.setDataNumber(otherSprite, "Immunity", 1)
        otherSprite.startEffect(effects.spray)
        sprites.changeDataNumberBy(otherSprite, "Life", -1)
        timer.after(500, function () {
            effects.clearParticles(otherSprite)
            sprites.setDataNumber(otherSprite, "Immunity", 0)
        })
    }
    if (sprites.readDataNumber(otherSprite, "Life") == 0) {
        sprites.destroy(otherSprite, effects.spray, 500)
    }
})
function AttemptInteraction () {
    if (mySprite.tileKindAt(TileDirection.Center, assets.tile`myTile28`) || mySprite.tileKindAt(TileDirection.Center, assets.tile`myTile31`)) {
        timer.throttle("TeleporterActivated", 500, function () {
            if (EnemyCondition == 0) {
                game.splash(Cutscene_Text[LevelCounter])
                for (let value of tiles.getTilesByType(assets.tile`myTile32`)) {
                    tiles.setTileAt(value, assets.tile`myTile`)
                    tiles.setWallAt(value, false)
                }
                for (let value of tiles.getTilesByType(assets.tile`myTile30`)) {
                    tiles.setTileAt(value, assets.tile`myTile1`)
                    tiles.setWallAt(value, false)
                }
                for (let value of tiles.getTilesByType(assets.tile`myTile28`)) {
                    tiles.setTileAt(value, assets.tile`myTile`)
                }
                for (let value of tiles.getTilesByType(assets.tile`myTile31`)) {
                    tiles.setTileAt(value, assets.tile`myTile1`)
                }
                LevelCounter += 1
                SetScene()
            } else {
                game.splash("There are still enemies lurking about!")
            }
        })
    }
    if (mySprite.tileKindAt(TileDirection.Center, assets.tile`myTile12`) || mySprite.tileKindAt(TileDirection.Center, assets.tile`myTile11`)) {
        game.splash("RoboRest: Instant Healing!")
        info.setLife(3)
    }
    if (mySprite.tileKindAt(TileDirection.Center, assets.tile`myTile13`) || mySprite.tileKindAt(TileDirection.Center, assets.tile`myTile13`)) {
        if (mySprite.tileKindAt(TileDirection.Center, assets.tile`myTile13`)) {
            tiles.setTileAt(mySprite.tilemapLocation(), assets.tile`myTile15`)
            for (let value of tiles.getTilesByType(assets.tile`myTile14`)) {
                tiles.setWallAt(value, false)
                tiles.setTileAt(value, assets.tile`myTile`)
            }
            for (let value of tiles.getTilesByType(assets.tile`myTile18`)) {
                tiles.setWallAt(value, false)
                tiles.setTileAt(value, assets.tile`myTile1`)
            }
        }
        if (mySprite.tileKindAt(TileDirection.Center, assets.tile`myTile25`)) {
            tiles.setTileAt(mySprite.tilemapLocation(), assets.tile`myTile26`)
            for (let value of tiles.getTilesByType(assets.tile`myTile14`)) {
                tiles.setWallAt(value, false)
                tiles.setTileAt(value, assets.tile`myTile`)
            }
            for (let value of tiles.getTilesByType(assets.tile`myTile18`)) {
                tiles.setWallAt(value, false)
                tiles.setTileAt(value, assets.tile`myTile1`)
            }
        }
        game.splash("Something happened!")
    }
    if (mySprite.tileKindAt(TileDirection.Center, assets.tile`myTile24`) || mySprite.tileKindAt(TileDirection.Center, assets.tile`myTile10`)) {
        if (mySprite.tileKindAt(TileDirection.Center, assets.tile`myTile10`)) {
            tiles.setTileAt(mySprite.tilemapLocation(), assets.tile`myTile8`)
            for (let value of tiles.getTilesByType(assets.tile`myTile7`)) {
                tiles.setWallAt(value, false)
                tiles.setTileAt(value, assets.tile`myTile`)
            }
            for (let value of tiles.getTilesByType(assets.tile`myTile27`)) {
                tiles.setWallAt(value, false)
                tiles.setTileAt(value, assets.tile`myTile1`)
            }
        }
        if (mySprite.tileKindAt(TileDirection.Center, assets.tile`myTile24`)) {
            tiles.setTileAt(mySprite.tilemapLocation(), assets.tile`myTile23`)
            for (let value of tiles.getTilesByType(assets.tile`myTile7`)) {
                tiles.setWallAt(value, false)
                tiles.setTileAt(value, assets.tile`myTile`)
            }
            for (let value of tiles.getTilesByType(assets.tile`myTile27`)) {
                tiles.setWallAt(value, false)
                tiles.setTileAt(value, assets.tile`myTile1`)
            }
        }
        game.splash("Something happened!")
    }
}
controller.right.onEvent(ControllerButtonEvent.Released, function () {
    if (controller.up.isPressed()) {
        LastButtonInput = 0
    } else if (controller.down.isPressed()) {
        LastButtonInput = 1
    }
})
sprites.onOverlap(SpriteKind.Hitbox, SpriteKind.Enemy, function (sprite, otherSprite) {
    if (HitCooldown != true) {
        HitCooldown = true
        scene.cameraShake(4, 500)
        info.changeLifeBy(-1)
        ActualSprite.startEffect(effects.disintegrate)
        timer.after(1000, function () {
            HitCooldown = false
            effects.clearParticles(ActualSprite)
        })
    }
    if (sprite.vx == 0 && sprite.vy == 0) {
        if (characterAnimations.matchesRule(mySprite, characterAnimations.rule(Predicate.FacingRight))) {
            otherSprite.vx = 100
        } else if (characterAnimations.matchesRule(mySprite, characterAnimations.rule(Predicate.FacingLeft))) {
            otherSprite.vx = -100
        } else if (characterAnimations.matchesRule(mySprite, characterAnimations.rule(Predicate.FacingUp))) {
            otherSprite.vy = -100
        } else {
            otherSprite.vy = 100
        }
    } else {
        otherSprite.setVelocity(sprite.vx * 1.5, sprite.vy * 1.5)
    }
})
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    if (controller.up.isPressed()) {
        LastButtonInput = 4
    } else if (controller.down.isPressed()) {
        LastButtonInput = 6
    } else {
        LastButtonInput = 2
    }
})
function SavePlace () {
    if (blockSettings.readNumber("SaveExists") == 1) {
        SaveConfirm = game.ask("Are you sure?")
    } else {
        SaveConfirm = true
    }
    if (SaveConfirm == true) {
        blockSettings.writeNumber("Life", info.life())
        blockSettings.writeNumber("SaveExists", 1)
        blockSettings.writeNumber("Level", LevelCounter)
        game.splash("Saved!")
    }
}
sprites.onDestroyed(SpriteKind.Enemy, function (sprite) {
    EnemyCondition += -1
    scene.cameraShake(2, 125)
})
function SpriteChase () {
    for (let value of sprites.allOfKind(SpriteKind.Enemy)) {
        if (value.image.equals(assets.image`Normie`)) {
            sprites.setDataNumber(value, "Speed", 25)
        } else if (value.image.equals(assets.image`RedMan`)) {
            sprites.setDataNumber(value, "Speed", 50)
        } else if (value.image.equals(assets.image`YellowGuy`)) {
            sprites.setDataNumber(value, "Speed", 75)
        }
        value.follow(mySprite, sprites.readDataNumber(value, "Speed"))
    }
}
function SetScene () {
    sprites.destroyAllSpritesOfKind(SpriteKind.Orb)
    sprites.destroyAllSpritesOfKind(SpriteKind.Enemy)
    sprites.destroyAllSpritesOfKind(SpriteKind.Acid)
    SpecialMessages()
    if (blockSettings.readNumber("SaveExists") == 1) {
        if (StopSave == 0) {
            StopSave = 1
            LevelCounter = blockSettings.readNumber("Level")
        }
    }
    if (LevelCounter >= Levels.length) {
        game.gameOver(true)
    }
    tiles.setCurrentTilemap(Levels[LevelCounter])
    EnemyCondition = 0
    for (let value of tiles.getTilesByType(assets.tile`Spawnee`)) {
        tiles.placeOnTile(mySprite, value)
        tiles.setTileAt(value, assets.tile`myTile`)
    }
    for (let value of tiles.getTilesByType(assets.tile`myTile30`)) {
        tiles.placeOnTile(sprites.create(assets.image`Tele Orb`, SpriteKind.Orb), value)
    }
    for (let value of tiles.getTilesByType(assets.tile`myTile32`)) {
        tiles.placeOnTile(sprites.create(assets.image`Tele Orb`, SpriteKind.Orb), value)
    }
    EnemySpawn()
}
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    if (controller.up.isPressed()) {
        LastButtonInput = 5
    } else if (controller.down.isPressed()) {
        LastButtonInput = 7
    } else {
        LastButtonInput = 3
    }
})
function Tutorial () {
    if (blockSettings.readNumber("StopTutorial") != 1 || ForceTutorial == 1) {
        PlayTutorial = game.ask("Would you like to", "play the tutorial?")
        if (PlayTutorial == true) {
            game.splash("Use WASD/Arrow Keys To move!")
            game.splash("Use A Button to attack with a knife!")
            game.splash("Use B Button to throw (Very Corrosive) Acid!")
            game.splash("Use menu button to access menu! (Menu has saves for if you get defeated)")
            game.splash("When all the enemies are destroyed, use the Teleporters to get to the next level!")
            game.splash("Avoid getting hit!")
            game.splash("Take out all the enemies!")
        } else if (ForceTutorial != 1) {
            StopTutorialFunction = game.ask("Stop Asking On", "Restart?")
            if (StopTutorialFunction == true) {
                blockSettings.writeNumber("StopTutorial", 1)
            }
        }
    }
}
function SetSprites () {
    mySprite = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . f 1 1 1 1 f . . . . . 
        . . . . . f 1 1 1 1 f . . . . . 
        . . . . . f 1 f f 1 f . . . . . 
        . . . . . f 1 1 1 1 f . . . . . 
        . . . . . f 1 f f 1 f . . . . . 
        . . . . . f 1 1 1 1 f . . . . . 
        . . . . . f 1 1 1 1 f . . . . . 
        . . . . . f 1 1 1 1 f . . . . . 
        . . . . . f 1 1 1 1 f . . . . . 
        . . . . . f 1 1 1 1 f . . . . . 
        . . . . . f 1 1 1 1 f . . . . . 
        . . . . . f 1 1 1 1 f . . . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Hitbox)
    ActualSprite = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Hitbox)
    BasicKnife = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Weapon)
    characterAnimations.setCharacterState(mySprite, characterAnimations.rule(Predicate.FacingDown))
    controller.moveSprite(mySprite)
    scene.cameraFollowSprite(mySprite)
    if (blockSettings.readNumber("SaveExists") != 1) {
        info.setLife(3)
    } else {
        info.setLife(blockSettings.readNumber("Life"))
    }
    mySprite.setFlag(SpriteFlag.Invisible, true)
    ActualSprite.setFlag(SpriteFlag.Ghost, true)
}
sprites.onOverlap(SpriteKind.Acid, SpriteKind.Enemy, function (sprite, otherSprite) {
    otherSprite.follow(mySprite, sprites.readDataNumber(otherSprite, "Speed") / 4)
    timer.after(500, function () {
        otherSprite.follow(mySprite, sprites.readDataNumber(otherSprite, "Speed"))
    })
    timer.background(function () {
        if (sprites.readDataNumber(otherSprite, "Immunity") != 1) {
            sprites.setDataNumber(otherSprite, "Immunity", 1)
            otherSprite.startEffect(effects.spray)
            sprites.changeDataNumberBy(otherSprite, "Life", -1)
            timer.after(1000, function () {
                effects.clearParticles(otherSprite)
                sprites.setDataNumber(otherSprite, "Immunity", 0)
            })
        }
        if (sprites.readDataNumber(otherSprite, "Life") == 0) {
            sprites.destroy(otherSprite, effects.spray, 500)
        }
    })
})
sprites.onCreated(SpriteKind.Orb, function (sprite) {
    animation.runImageAnimation(
    sprite,
    [img`
        . . . . . . . . . . . . . . . . 
        . . . . 8 8 8 8 8 . 8 8 . . . . 
        . . . 8 8 9 9 6 6 6 9 8 8 . . . 
        . . 8 8 9 6 6 9 6 6 6 9 8 8 . . 
        . 8 8 9 6 6 9 6 6 6 6 6 9 8 8 . 
        . 8 9 6 6 6 1 9 6 6 6 6 6 9 8 . 
        . . 6 6 6 6 6 1 9 6 1 9 6 9 8 . 
        . 8 6 6 6 6 9 1 1 1 9 9 9 6 8 . 
        . 8 6 9 9 9 1 1 1 9 6 6 6 6 8 . 
        . 8 9 6 9 1 6 9 1 6 6 6 6 6 . . 
        . 8 9 6 6 6 6 6 9 1 6 6 6 9 8 . 
        . 8 8 9 6 6 6 6 6 9 6 6 9 8 8 . 
        . . 8 8 9 6 6 6 9 6 6 9 8 8 . . 
        . . . 8 8 9 6 6 6 9 9 8 8 . . . 
        . . . . 8 8 . 8 8 8 8 8 . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . 8 8 8 8 8 8 . . . . . 
        . . . 8 8 9 9 6 6 6 9 8 8 . . . 
        . . 8 9 9 6 6 9 6 6 6 9 9 8 . . 
        . 8 9 6 6 6 6 6 9 6 6 6 6 9 8 . 
        . 8 9 6 6 6 6 9 9 6 6 6 6 9 8 . 
        8 9 6 6 6 6 9 1 9 9 6 6 6 6 9 8 
        8 6 6 6 6 9 9 9 1 9 9 6 6 6 9 8 
        8 6 6 9 9 9 1 1 1 9 1 9 6 9 6 8 
        8 6 9 6 9 1 9 1 1 1 9 9 9 6 6 8 
        8 9 6 6 6 9 9 1 9 9 9 6 6 6 6 8 
        8 9 6 6 6 6 9 9 1 9 6 6 6 6 9 8 
        . 8 9 6 6 6 6 9 9 6 6 6 6 9 8 . 
        . 8 9 6 6 6 6 9 6 6 6 6 6 9 8 . 
        . . 8 9 9 6 6 6 9 6 6 9 9 8 . . 
        . . . 8 8 9 6 6 6 9 9 8 8 . . . 
        . . . . . 8 8 8 8 8 8 . . . . . 
        `,img`
        . . . . . 8 8 8 8 8 8 . . . . . 
        . . . 8 8 9 9 6 6 6 9 8 8 . . . 
        . . 8 9 9 6 6 9 6 6 6 9 9 8 . . 
        . 8 9 6 6 6 6 6 9 6 6 6 6 9 8 . 
        . 8 9 6 6 6 6 9 9 6 6 6 6 9 8 . 
        8 9 6 6 6 6 9 1 9 9 6 6 6 6 9 8 
        8 6 6 6 6 9 9 9 1 9 9 6 6 6 9 8 
        8 6 6 9 9 9 1 1 1 9 1 9 6 9 6 8 
        8 6 9 6 9 1 9 1 1 1 9 9 9 6 6 8 
        8 9 6 6 6 9 9 1 9 9 9 6 6 6 6 8 
        8 9 6 6 6 6 9 9 1 9 6 6 6 6 9 8 
        . 8 9 6 6 6 6 9 9 6 6 6 6 9 8 . 
        . 8 9 6 6 6 6 9 6 6 6 6 6 9 8 . 
        . . 8 9 9 6 6 6 9 6 6 9 9 8 . . 
        . . . 8 8 9 6 6 6 9 9 8 8 . . . 
        . . . . . 8 8 8 8 8 8 . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . 8 8 8 8 . . 8 8 . . . . 
        . . . 8 8 9 9 6 6 6 9 8 8 . . . 
        . . 8 8 9 6 6 9 6 6 6 9 8 8 . . 
        . 8 8 9 6 6 9 6 6 6 6 6 9 8 8 . 
        . 8 9 6 6 6 1 9 6 6 6 6 6 9 8 . 
        . . 6 6 6 6 6 1 9 6 1 9 6 9 8 . 
        . . 6 6 6 6 9 1 1 1 9 9 9 6 8 . 
        . 8 6 9 9 9 1 1 1 9 6 6 6 6 . . 
        . 8 9 6 9 1 6 9 1 6 6 6 6 6 . . 
        . 8 9 6 6 6 6 6 9 1 6 6 6 9 8 . 
        . 8 8 9 6 6 6 6 6 9 6 6 9 8 8 . 
        . . 8 8 9 6 6 6 9 6 6 9 8 8 . . 
        . . . 8 8 9 6 6 6 9 9 8 8 . . . 
        . . . . 8 8 . . 8 8 8 8 . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . 8 8 8 8 8 8 . . . . . 
        . . . . 8 9 9 6 6 9 9 8 . . . . 
        . . . 8 9 6 6 9 6 6 6 9 8 . . . 
        . . 8 9 6 6 9 6 6 6 6 6 9 8 . . 
        . 8 9 6 6 6 9 6 6 6 6 6 6 9 8 . 
        . 8 9 6 6 6 6 1 6 6 9 9 6 9 8 . 
        . 8 6 6 6 6 6 1 1 1 6 6 9 6 8 . 
        . 8 6 9 6 6 1 1 1 6 6 6 6 6 8 . 
        . 8 9 6 9 9 6 6 1 6 6 6 6 9 8 . 
        . 8 9 6 6 6 6 6 6 9 6 6 6 9 8 . 
        . . 8 9 6 6 6 6 6 9 6 6 9 8 . . 
        . . . 8 9 6 6 6 9 6 6 9 8 . . . 
        . . . . 8 9 9 6 6 9 9 8 . . . . 
        . . . . . 8 8 8 8 8 8 . . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . 8 8 8 8 . . 8 8 . . . . 
        . . . 8 8 9 9 6 6 6 9 8 8 . . . 
        . . 8 8 9 6 6 9 6 6 6 9 8 8 . . 
        . 8 8 9 6 6 9 6 6 6 6 6 9 8 8 . 
        . 8 9 6 6 6 1 9 6 6 6 6 6 9 8 . 
        . . 6 6 6 6 6 1 9 6 1 9 6 9 8 . 
        . . 6 6 6 6 9 1 1 1 9 9 9 6 8 . 
        . 8 6 9 9 9 1 1 1 9 6 6 6 6 . . 
        . 8 9 6 9 1 6 9 1 6 6 6 6 6 . . 
        . 8 9 6 6 6 6 6 9 1 6 6 6 9 8 . 
        . 8 8 9 6 6 6 6 6 9 6 6 9 8 8 . 
        . . 8 8 9 6 6 6 9 6 6 9 8 8 . . 
        . . . 8 8 9 6 6 6 9 9 8 8 . . . 
        . . . . 8 8 . . 8 8 8 8 . . . . 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . 8 8 8 8 8 . 8 8 . . . . 
        . . . 8 8 9 9 6 6 6 9 8 8 . . . 
        . . 8 8 9 6 6 9 6 6 6 9 8 8 . . 
        . 8 8 9 6 6 9 6 6 6 6 6 9 8 8 . 
        . 8 9 6 6 6 1 9 6 6 6 6 6 9 8 . 
        . . 6 6 6 6 6 1 9 6 1 9 6 9 8 . 
        . 8 6 6 6 6 9 1 1 1 9 9 9 6 8 . 
        . 8 6 9 9 9 1 1 1 9 6 6 6 6 8 . 
        . 8 9 6 9 1 6 9 1 6 6 6 6 6 . . 
        . 8 9 6 6 6 6 6 9 1 6 6 6 9 8 . 
        . 8 8 9 6 6 6 6 6 9 6 6 9 8 8 . 
        . . 8 8 9 6 6 6 9 6 6 9 8 8 . . 
        . . . 8 8 9 6 6 6 9 9 8 8 . . . 
        . . . . 8 8 . 8 8 8 8 8 . . . . 
        . . . . . . . . . . . . . . . . 
        `],
    100,
    true
    )
})
function CharacterAnimations () {
    AnimDuration = 200
    characterAnimations.loopFrames(
    ActualSprite,
    [img`
        . . . . . f f f f b f . . . . . 
        . . . . b f f f 1 f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . b b d d d b . . . . . 
        . . . . . 1 1 b b b 1 . . . . . 
        . . . . . 1 1 1 1 1 1 1 . . . . 
        . . . . . 1 1 1 1 1 1 1 . . . . 
        . . . . b 1 1 1 1 1 1 1 1 . . . 
        . . . . 1 1 1 1 1 1 1 1 1 . . . 
        . . . . 1 1 1 1 1 1 1 1 b . . . 
        . . . . b 1 1 1 1 1 1 b . . . . 
        . . . . . b b b b b b . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f 1 f . . . . . 
        . . . . b f f f b f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . b b d d d b . . . . . 
        . . . . . 1 1 b b b 1 . . . . . 
        . . . . . 1 1 1 1 1 1 . . . . . 
        . . . . . 1 1 1 1 1 1 1 . . . . 
        . . . . . 1 1 1 1 1 1 1 . . . . 
        . . . . 1 1 1 1 1 1 1 1 1 . . . 
        . . . . 1 1 1 1 1 1 1 1 b . . . 
        . . . . b 1 1 1 1 1 1 b . . . . 
        . . . . . b b b b b b . . . . . 
        `],
    AnimDuration,
    characterAnimations.rule(Predicate.FacingLeft)
    )
    characterAnimations.loopFrames(
    ActualSprite,
    [img`
        . . . . . f f f f b f . . . . . 
        . . . . b f f f 1 f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . b d d d b b . . . . . 
        . . . . . 1 b b b 1 1 . . . . . 
        . . . . 1 1 1 1 1 1 1 . . . . . 
        . . . . 1 1 1 1 1 1 1 . . . . . 
        . . . 1 1 1 1 1 1 1 1 b . . . . 
        . . . 1 1 1 1 1 1 1 1 1 . . . . 
        . . . b 1 1 1 1 1 1 1 1 . . . . 
        . . . . b 1 1 1 1 1 1 b . . . . 
        . . . . . b b b b b b . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f 1 f . . . . . 
        . . . . b f f f b f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . b d d d b b . . . . . 
        . . . . . 1 b b b 1 1 . . . . . 
        . . . . . 1 1 1 1 1 1 . . . . . 
        . . . . 1 1 1 1 1 1 1 . . . . . 
        . . . . 1 1 1 1 1 1 1 . . . . . 
        . . . 1 1 1 1 1 1 1 1 1 . . . . 
        . . . b 1 1 1 1 1 1 1 1 . . . . 
        . . . . b 1 1 1 1 1 1 b . . . . 
        . . . . . b b b b b b . . . . . 
        `],
    AnimDuration,
    characterAnimations.rule(Predicate.FacingRight)
    )
    characterAnimations.loopFrames(
    ActualSprite,
    [img`
        . . . . . f f f f b f . . . . . 
        . . . . b f f f 1 f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . b b d d d b . . . . . 
        . . . . 1 1 1 b b b 1 1 . . . . 
        . . . . 1 1 1 1 1 1 1 1 . . . . 
        . . . 1 1 1 1 1 1 1 1 1 . . . . 
        . . . 1 1 1 1 1 1 1 1 1 1 . . . 
        . . . 1 1 1 1 1 1 1 1 1 1 . . . 
        . . . b 1 1 1 1 1 1 1 1 b . . . 
        . . . . b 1 1 1 1 1 1 b . . . . 
        . . . . . b b b b b b . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f 1 f . . . . . 
        . . . . b f f f b f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . b b d d d b . . . . . 
        . . . . 1 1 1 b b b 1 1 . . . . 
        . . . . 1 1 1 1 1 1 1 1 . . . . 
        . . . . 1 1 1 1 1 1 1 1 1 . . . 
        . . . 1 1 1 1 1 1 1 1 1 1 . . . 
        . . . 1 1 1 1 1 1 1 1 1 1 . . . 
        . . . b 1 1 1 1 1 1 1 1 b . . . 
        . . . . b 1 1 1 1 1 1 b . . . . 
        . . . . . b b b b b b . . . . . 
        `],
    AnimDuration,
    characterAnimations.rule(Predicate.FacingUp)
    )
    characterAnimations.loopFrames(
    ActualSprite,
    [img`
        . . . . . f f f f b f . . . . . 
        . . . . b f f f 1 f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . d d d d b d . . . . . 
        . . . . . b b d b 1 b . . . . . 
        . . . . 1 1 1 b 1 1 1 1 . . . . 
        . . . . 1 1 1 1 b 1 1 1 . . . . 
        . . . 1 1 1 1 1 b 1 1 1 1 . . . 
        . . . 1 1 1 1 b 1 1 1 1 1 . . . 
        . . . 1 1 1 1 b 1 1 1 1 1 . . . 
        . . . b 1 1 1 1 b 1 1 1 b . . . 
        . . . . b 1 1 1 b 1 1 b . . . . 
        . . . . . b b b c b b . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f 1 f . . . . . 
        . . . . b f f f b f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d b d . . . . . 
        . . . . . b b d b 1 b . . . . . 
        . . . . 1 1 1 b 1 1 1 1 . . . . 
        . . . . 1 1 1 1 b 1 1 1 . . . . 
        . . . . 1 1 1 b 1 1 1 1 1 . . . 
        . . . 1 1 1 1 b 1 1 1 1 1 . . . 
        . . . 1 1 1 1 b 1 1 1 1 1 . . . 
        . . . b 1 1 1 b 1 1 1 1 b . . . 
        . . . . b 1 1 c b 1 1 b . . . . 
        . . . . . b b c c b b . . . . . 
        `],
    AnimDuration,
    characterAnimations.rule(Predicate.FacingDown)
    )
    characterAnimations.loopFrames(
    ActualSprite,
    [img`
        . . . . . f f f f b f . . . . . 
        . . . . b f f f 1 f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . b b d b b b . . . . . 
        . . . . . 1 1 b 1 1 1 . . . . . 
        . . . . b 1 1 1 1 1 1 1 . . . . 
        . . . . 1 1 1 1 1 1 1 1 . . . . 
        . . . . 1 1 1 1 1 1 1 1 1 . . . 
        . . . . 1 1 1 1 1 1 1 1 1 . . . 
        . . . . 1 1 1 1 1 1 1 1 b . . . 
        . . . . b 1 1 1 1 1 1 b . . . . 
        . . . . . b b b b b b . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f 1 f . . . . . 
        . . . . b f f f b f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . b b d b b b . . . . . 
        . . . . . 1 1 b 1 1 1 . . . . . 
        . . . . . 1 1 1 1 1 1 1 . . . . 
        . . . . b 1 1 1 1 1 1 1 . . . . 
        . . . . 1 1 1 1 1 1 1 1 . . . . 
        . . . . 1 1 1 1 1 1 1 1 1 . . . 
        . . . . 1 1 1 1 1 1 1 1 b . . . 
        . . . . b 1 1 1 1 1 1 b . . . . 
        . . . . . b b b b b b . . . . . 
        `],
    AnimDuration,
    characterAnimations.rule(Predicate.FacingUp, Predicate.FacingLeft)
    )
    characterAnimations.loopFrames(
    ActualSprite,
    [img`
        . . . . . f f f f b f . . . . . 
        . . . . b f f f 1 f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . b b b d b b . . . . . 
        . . . . . 1 1 1 b 1 1 . . . . . 
        . . . . 1 1 1 1 1 1 1 b . . . . 
        . . . . 1 1 1 1 1 1 1 1 . . . . 
        . . . 1 1 1 1 1 1 1 1 1 . . . . 
        . . . 1 1 1 1 1 1 1 1 1 . . . . 
        . . . b 1 1 1 1 1 1 1 1 . . . . 
        . . . . b 1 1 1 1 1 1 b . . . . 
        . . . . . b b b b b b . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f 1 f . . . . . 
        . . . . b f f f b f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . b b b d b b . . . . . 
        . . . . . 1 1 1 b 1 1 . . . . . 
        . . . . 1 1 1 1 1 1 1 . . . . . 
        . . . . 1 1 1 1 1 1 1 b . . . . 
        . . . . 1 1 1 1 1 1 1 1 . . . . 
        . . . 1 1 1 1 1 1 1 1 1 . . . . 
        . . . b 1 1 1 1 1 1 1 1 . . . . 
        . . . . b 1 1 1 1 1 1 b . . . . 
        . . . . . b b b b b b . . . . . 
        `],
    AnimDuration,
    characterAnimations.rule(Predicate.FacingUp, Predicate.FacingRight)
    )
    characterAnimations.loopFrames(
    ActualSprite,
    [img`
        . . . . . f f f f b f . . . . . 
        . . . . b f f f 1 f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . b d d b b b . . . . . 
        . . . . . 1 1 b 1 1 1 . . . . . 
        . . . . 1 1 b 1 1 1 1 1 . . . . 
        . . . . 1 1 1 b 1 1 1 1 b . . . 
        . . . . 1 1 b 1 1 1 1 1 1 . . . 
        . . . . 1 1 b 1 1 1 1 1 1 . . . 
        . . . . b 1 b 1 1 1 1 1 b . . . 
        . . . . . c 1 1 1 1 1 b . . . . 
        . . . . . . b b b b b . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f 1 f . . . . . 
        . . . . b f f f b f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . b d d b b b . . . . . 
        . . . . . 1 1 b 1 1 1 . . . . . 
        . . . . . 1 b 1 1 1 1 1 . . . . 
        . . . . b 1 1 b 1 1 1 1 1 . . . 
        . . . . 1 1 1 b 1 1 1 1 1 . . . 
        . . . . 1 1 b 1 1 1 1 1 1 . . . 
        . . . . b 1 b 1 1 1 1 1 b . . . 
        . . . . . c 1 1 1 1 1 b . . . . 
        . . . . . . b b b b b . . . . . 
        `],
    AnimDuration,
    characterAnimations.rule(Predicate.FacingDown, Predicate.FacingLeft)
    )
    characterAnimations.loopFrames(
    ActualSprite,
    [img`
        . . . . . f f f f b f . . . . . 
        . . . . b f f f 1 f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . b b b d d b . . . . . 
        . . . . . 1 1 1 b 1 1 . . . . . 
        . . . . 1 1 1 1 1 b 1 1 . . . . 
        . . . b 1 1 1 1 b 1 1 1 . . . . 
        . . . 1 1 1 1 1 1 b 1 1 . . . . 
        . . . 1 1 1 1 1 1 b 1 1 . . . . 
        . . . b 1 1 1 1 1 b 1 b . . . . 
        . . . . b 1 1 1 1 1 c . . . . . 
        . . . . . b b b b b . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f 1 f . . . . . 
        . . . . b f f f b f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d d d . . . . . 
        . . . . . b b b d d b . . . . . 
        . . . . . 1 1 1 b 1 1 . . . . . 
        . . . . 1 1 1 1 1 b 1 . . . . . 
        . . . 1 1 1 1 1 b 1 1 b . . . . 
        . . . 1 1 1 1 1 b 1 1 1 . . . . 
        . . . 1 1 1 1 1 1 b 1 1 . . . . 
        . . . b 1 1 1 1 1 b 1 b . . . . 
        . . . . b 1 1 1 1 1 c . . . . . 
        . . . . . b b b b b . . . . . . 
        `],
    AnimDuration,
    characterAnimations.rule(Predicate.FacingDown, Predicate.FacingRight)
    )
}
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    if (controller.left.isPressed()) {
        LastButtonInput = 4
    } else if (controller.right.isPressed()) {
        LastButtonInput = 5
    } else {
        LastButtonInput = 0
    }
})
function Reset () {
    ResetConfirm = game.ask("Are you sure?")
    if (ResetConfirm == true) {
        blockSettings.clear()
        game.splash("Cleared!")
    }
}
function Menu () {
    if (PauseGame == 0) {
        myMenu = miniMenu.createMenu(
        miniMenu.createMenuItem("Close"),
        miniMenu.createMenuItem("Save"),
        miniMenu.createMenuItem("Reset"),
        miniMenu.createMenuItem("Restart Game"),
        miniMenu.createMenuItem("Play Tutorial")
        )
        myMenu.setPosition(scene.cameraProperty(CameraProperty.X), scene.cameraProperty(CameraProperty.Y))
        myMenu.setFrame(img`
            1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 
            1 9 9 1 8 b b b b b 8 1 9 9 1 
            1 9 9 1 8 b b b b b 8 1 9 9 1 
            1 1 9 9 9 1 1 1 1 1 9 9 9 1 1 
            1 8 9 8 8 1 1 1 1 1 8 8 9 8 1 
            1 8 9 8 6 1 1 1 1 1 6 8 9 8 1 
            1 8 9 8 6 8 8 8 8 8 6 8 9 8 1 
            1 8 9 9 9 9 9 9 9 9 9 9 9 8 1 
            1 8 8 8 6 8 6 6 6 8 6 8 8 8 1 
            1 8 8 8 9 9 9 9 9 9 9 8 8 8 1 
            1 8 8 8 8 8 6 8 6 8 8 8 8 8 1 
            1 1 1 1 8 8 9 9 9 8 8 1 1 1 1 
            1 9 9 1 8 8 8 8 8 8 8 1 9 9 1 
            1 9 9 1 8 8 8 8 8 8 8 1 9 9 1 
            1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 
            `)
        PauseGame = 1
        myMenu.onButtonPressed(controller.A, function (selection, selectedIndex) {
            if (selectedIndex == 0) {
                myMenu.close()
                StopPause = 1
            } else if (selectedIndex == 1) {
                SavePlace()
            } else if (selectedIndex == 2) {
                Reset()
            } else if (selectedIndex == 3) {
                game.reset()
            } else if (selectedIndex == 4) {
                ForceTutorial = 1
                Tutorial()
            }
        })
    } else {
        myMenu.close()
        StopPause = 1
    }
}
controller.combos.attachCombo("Bab", function () {
    Menu()
})
sprites.onCreated(SpriteKind.Enemy, function (sprite) {
    if (sprite.image.equals(assets.image`Normie`)) {
        animation.runImageAnimation(
        sprite,
        assets.animation`Normie`,
        20,
        true
        )
        sprites.setDataNumber(sprite, "Life", 1)
    } else if (sprite.image.equals(assets.image`RedMan`)) {
        animation.runImageAnimation(
        sprite,
        assets.animation`RedGuy`,
        75,
        true
        )
        sprites.setDataNumber(sprite, "Life", 2)
    } else if (sprite.image.equals(assets.image`YellowGuy`)) {
        animation.runImageAnimation(
        sprite,
        [img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . 9 9 9 9 . . . . . . 
            . . . . . . 1 1 1 1 . . . . . . 
            . . . . . . 1 1 1 1 . . . . . . 
            . . . . . . 1 1 1 1 . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . 5 . . . . . . . 
            . . . . . . . 5 . . . . . . . . 
            . . . . . . 4 . . . . . . . . . 
            . . . . . . . 5 5 . . . . . . . 
            . . . . . . . . . 4 . . . . . . 
            . . . . . . . . 5 . . . . . . . 
            . . . . . . . 5 . . . . . . . . 
            . . . . . . 5 . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `,img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . 9 9 9 9 . . . . . . 
            . . . . . . 1 1 1 1 . . . . . . 
            . . . . . . 1 1 1 1 . . . . . . 
            . . . . . . 1 1 1 1 . . . . . . 
            . . . . . . . 5 . . . . . . . . 
            . . . . . . . . 5 . . . . . . . 
            . . . . . . . . . 4 . . . . . . 
            . . . . . . . 5 5 . . . . . . . 
            . . . . . . 4 . . . . . . . . . 
            . . . . . . . 5 . . . . . . . . 
            . . . . . . . . 5 . . . . . . . 
            . . . . . . . . . 5 . . . . . . 
            . . . . . . . . . . . . . . . . 
            `],
        20,
        true
        )
        sprites.setDataNumber(sprite, "Life", 1)
    }
    EnemyCondition += 1
    SpriteChase()
})
function GameArrays () {
    Levels = [
    tilemap`Level 1`,
    tilemap`Level 2`,
    tilemap`Level 3`,
    tilemap`Level 4`,
    tilemap`level3`
    ]
    Cutscene_Text = [
    "What Am I Doing Here?",
    "The Situation Seems Dire",
    "There is something I must do",
    "Could this be related to my- no",
    "This place is never ending!"
    ]
}
function SpecialMessages () {
    if (LevelCounter == 4) {
        game.splash("Oh, this is going to be intense!")
    }
}
controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    if (controller.left.isPressed()) {
        LastButtonInput = 6
    } else if (controller.right.isPressed()) {
        LastButtonInput = 7
    } else {
        LastButtonInput = 1
    }
})
sprites.onCreated(SpriteKind.Acid, function (sprite) {
    animation.runImageAnimation(
    sprite,
    assets.animation`Acid`,
    50,
    false
    )
    sprite.lifespan = 5000
    timer.after(300, function () {
        sprite.scale = 0.9
    })
})
controller.down.onEvent(ControllerButtonEvent.Released, function () {
    if (controller.up.isPressed()) {
        LastButtonInput = 0
    } else if (controller.right.isPressed()) {
        LastButtonInput = 3
    } else if (controller.left.isPressed()) {
        LastButtonInput = 2
    }
})
function EnemySpawn () {
    for (let value of tiles.getTilesByType(assets.tile`myTile2`)) {
        tiles.placeOnTile(sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . 1 1 1 1 1 1 1 . . . . . 
            . . . . 1 1 1 1 1 1 1 . . . . . 
            . . . . 1 1 1 1 1 1 1 . . . . . 
            . . . . 1 1 1 1 1 1 1 . . . . . 
            . . . . b b b b b b b . . . . . 
            . . . . b b b b b b b . . . . . 
            . . . . . 6 . . . 6 . . . . . . 
            . . . . . 9 9 9 9 9 . . . . . . 
            . . . . . . 6 . 6 . . . . . . . 
            . . . . . . 9 9 9 . . . . . . . 
            . . . . . . . 6 . . . . . . . . 
            . . . . . . . 9 . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.Enemy), value)
        tiles.setTileAt(value, assets.tile`myTile1`)
    }
    for (let value of tiles.getTilesByType(assets.tile`myTile4`)) {
        tiles.placeOnTile(sprites.create(assets.image`Normie`, SpriteKind.Enemy), value)
        tiles.setTileAt(value, assets.tile`myTile`)
    }
    for (let value of tiles.getTilesByType(assets.tile`myTile19`)) {
        tiles.placeOnTile(sprites.create(assets.image`RedMan`, SpriteKind.Enemy), value)
        tiles.setTileAt(value, assets.tile`myTile1`)
    }
    for (let value of tiles.getTilesByType(assets.tile`myTile20`)) {
        tiles.placeOnTile(sprites.create(assets.image`RedMan`, SpriteKind.Enemy), value)
        tiles.setTileAt(value, assets.tile`myTile`)
    }
    for (let value of tiles.getTilesByType(assets.tile`myTile21`)) {
        tiles.placeOnTile(sprites.create(assets.image`YellowGuy`, SpriteKind.Enemy), value)
        tiles.setTileAt(value, assets.tile`myTile1`)
    }
    for (let value of tiles.getTilesByType(assets.tile`myTile22`)) {
        tiles.placeOnTile(sprites.create(assets.image`YellowGuy`, SpriteKind.Enemy), value)
        tiles.setTileAt(value, assets.tile`myTile`)
    }
}
info.onLifeZero(function () {
    controller.moveSprite(mySprite, 0, 0)
    sprites.destroyAllSpritesOfKind(SpriteKind.Enemy, effects.spray, 200)
    sprites.destroyAllSpritesOfKind(SpriteKind.Weapon)
    sprites.destroyAllSpritesOfKind(SpriteKind.Acid)
    characterAnimations.setCharacterAnimationsEnabled(ActualSprite, false)
    animation.runImageAnimation(
    ActualSprite,
    [img`
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f 1 f . . . . . 
        . . . . b f f f b f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . d d d d b d . . . . . 
        . . . . . b b d b 1 b . . . . . 
        . . . . 1 1 1 b 1 1 1 1 . . . . 
        . . . . 1 1 1 1 1 1 1 1 . . . . 
        . . . . 1 1 1 1 1 1 1 1 1 . . . 
        . . . 1 1 1 1 1 1 1 1 1 1 . . . 
        . . . 1 1 1 1 1 1 1 1 1 1 . . . 
        . . . b 1 1 1 b 1 1 1 1 b . . . 
        . . . . b 1 1 c b 1 1 b . . . . 
        . . . . . b b c c b b . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f 1 f . . . . . 
        . . . . b f f f b f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . . f f c c c c c c f f . . . 
        . . . . . f f f f f f . . . . . 
        . . . . . b b d b 1 b . . . . . 
        . . . . 1 1 1 b 1 1 1 1 . . . . 
        . . . . 1 1 1 1 1 1 1 1 1 . . . 
        . . . 1 1 1 1 1 1 1 1 1 1 . . . 
        . . . 1 1 1 1 1 1 1 1 1 1 . . . 
        . . . 1 1 1 1 1 1 1 1 1 1 . . . 
        . . . b 1 1 1 b 1 1 1 1 b . . . 
        . . . . b 1 1 c b 1 1 b . . . . 
        . . . . . b b c c b b . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f 1 f . . . . . 
        . . . . b f f f b f f b . . . . 
        . . . f c b b b b b b c f . . . 
        . . 1 f f c c c c c c f f . . . 
        . 1 1 1 1 f f f f f f 1 1 1 . . 
        . 1 1 1 1 1 1 1 1 1 1 1 1 1 1 . 
        . 1 1 1 1 1 1 1 1 1 1 1 1 1 1 . 
        b 1 1 1 1 1 1 1 1 1 1 1 1 b b . 
        . b b 1 1 1 1 1 1 1 1 1 b . . . 
        . . . b 1 1 1 1 1 1 1 b . . . . 
        . . . . . b b c c b b . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f 1 f . . . . . 
        . . . . b f f f b f f b . . . . 
        . . 1 f c b b b b b b c f 1 . . 
        . 1 1 f f c c c c c c f f 1 1 . 
        b 1 1 1 1 f f f f f f 1 1 1 b . 
        . b b 1 1 1 1 1 1 1 1 1 b . . . 
        . . . b 1 1 1 1 1 1 1 b . . . . 
        . . . . . b b c c b b . . . . . 
        `],
    200,
    false
    )
    timer.after(1200, function () {
        game.gameOver(false)
    })
})
let ResetConfirm = false
let AnimDuration = 0
let StopTutorialFunction = false
let PlayTutorial = false
let ForceTutorial = 0
let Levels: tiles.TileMapData[] = []
let StopSave = 0
let SaveConfirm = false
let ActualSprite: Sprite = null
let HitCooldown = false
let Cutscene_Text: string[] = []
let EnemyCondition = 0
let LevelCounter = 0
let myMenu2: miniMenu.MenuSprite = null
let BasicKnife: Sprite = null
let mySprite: Sprite = null
let StopPause = 0
let myMenu: miniMenu.MenuSprite = null
let PauseGame = 0
let Special_Cheat = 0
let LastButtonInput = 0
GameArrays()
SetSprites()
SetScene()
CharacterAnimations()
Tutorial()
game.onUpdate(function () {
    BasicKnife.setPosition(mySprite.x, mySprite.y)
    ActualSprite.setPosition(mySprite.x, mySprite.y)
    if (LastButtonInput < 4) {
        if (LastButtonInput == 0) {
            characterAnimations.setCharacterState(mySprite, characterAnimations.rule(Predicate.FacingUp))
        } else if (LastButtonInput == 2) {
            characterAnimations.setCharacterState(mySprite, characterAnimations.rule(Predicate.FacingLeft))
        } else if (LastButtonInput == 3) {
            characterAnimations.setCharacterState(mySprite, characterAnimations.rule(Predicate.FacingRight))
        } else {
            characterAnimations.setCharacterState(mySprite, characterAnimations.rule(Predicate.FacingDown))
        }
    } else {
        if (LastButtonInput == 4) {
            characterAnimations.setCharacterState(mySprite, characterAnimations.rule(Predicate.FacingUp, Predicate.FacingLeft))
        } else if (LastButtonInput == 5) {
            characterAnimations.setCharacterState(mySprite, characterAnimations.rule(Predicate.FacingUp, Predicate.FacingRight))
        } else if (LastButtonInput == 6) {
            characterAnimations.setCharacterState(mySprite, characterAnimations.rule(Predicate.FacingDown, Predicate.FacingLeft))
        } else if (LastButtonInput == 7) {
            characterAnimations.setCharacterState(mySprite, characterAnimations.rule(Predicate.FacingDown, Predicate.FacingRight))
        }
    }
    if (PauseGame == 1) {
        for (let value of sprites.allOfKind(SpriteKind.Enemy)) {
            value.follow(mySprite, 0)
        }
        controller.moveSprite(mySprite, 0, 0)
    }
    if (StopPause == 1) {
        PauseGame = 0
        SpriteChase()
        controller.moveSprite(mySprite)
        StopPause = 0
    }
})
